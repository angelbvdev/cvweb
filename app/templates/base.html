<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Welcome{% endblock %} - Angel Burgos</title>

    <script>
      (function () {
        const saved = localStorage.getItem('theme');
        const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
        const theme = saved || (prefersLight ? 'light' : 'dark');
        document.documentElement.dataset.theme = theme;
      })();
    </script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/output.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  </head>
  <body class="min-h-screen flex flex-col font-sans">
    <header class="sticky top-0 z-30 backdrop-blur app-header">
      <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between gap-4">
        <a href="{{ url_for('main.index') }}" class="flex items-center gap-3 group">
          <span class="brand-badge group-hover:scale-105">
            <i class="bi bi-code-slash"></i>
          </span>
          <div>
            <p class="text-sm uppercase tracking-[0.25em] text-slate-400">Angel Burgos</p>
            <p class="text-lg font-semibold text-slate-50">DevOps ¬∑ Data Driven</p>
          </div>
        </a>

        <div class="flex items-center gap-2 md:order-3">
          <button id="theme-toggle" type="button" class="icon-btn" title="Toggle theme" aria-label="Toggle theme">
            <i id="theme-icon" class="bi bi-sun text-xl"></i>
          </button>
          <button id="menu-toggle" type="button" class="md:hidden icon-btn" aria-label="Open menu">
            <i class="bi bi-list text-2xl"></i>
          </button>
        </div>

        <nav id="main-nav" class="hidden md:flex items-center gap-2 text-sm font-medium">
          <a href="{{ url_for('main.index') }}" class="nav-link">Home</a>
          <a href="{{ url_for('main.about') }}" class="nav-link">About</a>
          <a href="{{ url_for('projects.projects_home') }}" class="nav-link">Projects</a>
          <a href="{{ url_for('blog.index') }}" class="nav-link">Blog</a>
          <a href="{{ url_for('main.resume') }}" class="nav-link">Resume</a>
          <a href="{{ url_for('main.contact') }}" class="nav-link">Contact</a>
        </nav>
      </div>

      <div id="mobile-nav" class="md:hidden hidden px-4 pb-4">
        <div class="card p-4 flex flex-col gap-2">
          <a href="{{ url_for('main.index') }}" class="nav-link">Home</a>
          <a href="{{ url_for('main.about') }}" class="nav-link">About</a>
          <a href="{{ url_for('projects.projects_home') }}" class="nav-link">Projects</a>
          <a href="{{ url_for('blog.index') }}" class="nav-link">Blog</a>
          <a href="{{ url_for('main.resume') }}" class="nav-link">Resume</a>
          <a href="{{ url_for('main.contact') }}" class="nav-link">Contact</a>
        </div>
      </div>
    </header>

    <div class="max-w-screen-2xl w-full mx-auto px-4 sm:px-6 lg:px-8 pt-6 space-y-4">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            {% set styles = {
              'success': 'border-emerald-700/80 bg-emerald-900/40 text-emerald-50',
              'warning': 'border-amber-700/80 bg-amber-900/40 text-amber-50',
              'danger': 'border-rose-700/80 bg-rose-900/40 text-rose-50',
              'error': 'border-rose-700/80 bg-rose-900/40 text-rose-50',
              'info': 'border-cyan-700/80 bg-cyan-900/40 text-cyan-50'
            } %}
            <div class="flex items-start gap-3 border rounded-2xl px-4 py-3 shadow-lg shadow-black/20 {{ styles.get(category, 'border-slate-800 bg-slate-900/60 text-slate-100') }}">
              <span class="mt-1 text-xl">
                {% if category in ['success'] %}‚úÖ{% elif category in ['warning'] %}‚ö†Ô∏è{% elif category in ['danger', 'error'] %}‚õî{% else %}üí°{% endif %}
              </span>
              <div class="flex-1 leading-relaxed">{{ message }}</div>
              <button type="button" class="footer-link" onclick="this.parentElement.remove()">‚úï</button>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}
    </div>

    <main class="flex-1 w-full">
      <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        {% block content %}{% endblock %}
      </div>
    </main>

    <footer class="mt-auto app-footer">
      <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex flex-col md:flex-row items-center justify-between gap-3 text-sm muted">
        <p>¬© 2025 Angel Burgos ¬∑ Built with Python & Flask</p>
        <div class="flex items-center gap-4 text-lg">
          <a href="https://www.linkedin.com/in/angel-aldair-burgos-valenzuela-150889381" class="footer-link"><i class="bi bi-linkedin"></i></a>
          <a href="https://github.com/angelbvdev" class="footer-link"><i class="bi bi-github"></i></a>
          <a href="{{ url_for('main.contact') }}" class="footer-link"><i class="bi bi-envelope-fill"></i></a>
        </div>
      </div>
    </footer>

    <script>
      const menuToggle = document.getElementById('menu-toggle');
      const mobileNav = document.getElementById('mobile-nav');
      if (menuToggle && mobileNav) {
        menuToggle.addEventListener('click', () => {
          mobileNav.classList.toggle('hidden');
        });
      }
    </script>

    <script>
      const themeToggle = document.getElementById('theme-toggle');
      const themeIcon = document.getElementById('theme-icon');

      function getTheme() {
        return document.documentElement.dataset.theme || 'dark';
      }

      function setTheme(theme) {
        document.documentElement.dataset.theme = theme;
        localStorage.setItem('theme', theme);
        syncThemeIcon();
      }

      function syncThemeIcon() {
        if (!themeIcon) return;
        const theme = getTheme();
        themeIcon.classList.remove('bi-sun', 'bi-moon');
        if (theme === 'light') {
          themeIcon.classList.add('bi-moon');
          themeIcon.title = 'Switch to dark';
        } else {
          themeIcon.classList.add('bi-sun');
          themeIcon.title = 'Switch to light';
        }
      }

      syncThemeIcon();
      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          setTheme(getTheme() === 'light' ? 'dark' : 'light');
        });
      }
    </script>
  </body>
</html>
