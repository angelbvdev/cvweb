{% extends "base.html" %}

{% block title %}{{ proyecto.title }}{% endblock %}

{% block content %}

<div class="container py-5">

    <a href="{{ url_for('projects_bp.projects_list') }}" class="btn btn-outline-secondary mb-4">
        <i class="bi bi-arrow-left"></i> Volver
    </a>

    <!-- TITULO -->
    <h1 class="fw-bold mb-3">{{ proyecto.title }}</h1>

    <!-- DESCRIPCIÓN LARGA -->
    {% if proyecto.long_description %}
    <p class="text-muted fs-5">
        {{ proyecto.long_description }}
    </p>
    {% endif %}

    <!-- TAGS -->
    {% if proyecto.tags %}
    <div class="mb-4">
        {% for tag in proyecto.tags.split(',') %}
            <span class="badge rounded-pill bg-primary bg-opacity-25 text-primary me-1">
                {{ tag.strip() }}
            </span>
        {% endfor %}
    </div>
    {% endif %}

    <!-- GALERÍA -->
    {% if proyecto.images %}
    <h3 class="h4 fw-bold mt-5">Galería del Proyecto</h3>

    <div class="row row-cols-1 row-cols-md-2 g-4 mt-3">
        {% for img in proyecto.images.split(',') %}
        <div class="col">
            <img src="{{ url_for('static', filename='projects/' ~ img.strip()) }}"
                 class="img-fluid rounded shadow"
                 alt="Screenshot">
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- BLOQUES DE CÓDIGO -->
    {% if proyecto.code_blocks %}
    <h3 class="h4 fw-bold mt-5">Código Destacado</h3>

    {% for block in proyecto.code_blocks %}
    <div class="mt-3 p-3 bg-light border rounded shadow-sm">

        {% if block.title %}
        <h5 class="fw-bold">{{ block.title }}</h5>
        {% endif %}

        <pre class="mt-2"><code>{{ block.content }}</code></pre>
    </div>
    {% endfor %}
    {% endif %}

    <!-- BOTÓN GITHUB -->
    {% if proyecto.repo_url %}
    <div class="mt-5 text-end">
        <a href="{{ proyecto.repo_url }}" target="_blank"
           class="btn btn-primary btn-lg">
           <i class="bi bi-github"></i> Ver repositorio
        </a>
    </div>
    {% endif %}

</div>

{% endblock %}
